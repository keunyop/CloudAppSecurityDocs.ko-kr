---
title: "Cloud App Security 프록시 사용 | Microsoft 문서"
description: "이 항목에서는 Cloud App Security 프록시의 작동 방법에 대한 정보를 제공합니다."
keywords: 
author: rkarlin
ms.author: rkarlin
manager: mbaldwin
ms.date: 7/31/2017
ms.topic: article
ms.prod: 
ms.service: cloud-app-security
ms.technology: 
ms.assetid: 28317b70-1851-4610-b1d6-863bc5994bb6
ms.reviewer: reutam
ms.suite: ems
ms.openlocfilehash: 82e1ee0b5161dce88db815dc8eea06340bdbc532
ms.sourcegitcommit: f9851779aa15b11f559e56ac818f1333f027c000
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/07/2017
---
# <a name="working-with-the-cloud-app-security-proxy"></a>Cloud App Security 프록시 작업

요즘의 작업 공간에서는 사후에 클라우드 환경에 무슨 일이 일어났는지 아는 것만으로는 충분치 않습니다. 지금은 직원이 의도적이든 우연이든 데이터와 조직을 위험에 빠뜨리기 전에 위반이나 누수를 실시간으로 막을 수 있어야 합니다. 조직의 사용자가 클라우드 앱에서 제공하는 대부분의 서비스 및 도구를 최대한 활용하고 개인의 장치를 회사에 가져올 수 있도록 만들어줘야 합니다. 동시에 데이터 누수, 랜섬웨어 공격, 대용량 데이터 도용 등으로부터 조직을 보호할 도구를 갖춰야 합니다. 

## <a name="introducing-the-cloud-app-security-proxy"></a>Cloud App Security 프록시 소개
Cloud App Security의 프록시는 실시간으로 모니터링을 수행하고 클라우드 환경뿐만 아니라 클라우드 내에서의 활동에 대한 액세스를 제어하는 데 필요한 도구를 제공합니다.
Cloud App Security 프록시를 통해 조직을 보호할 수 있습니다.
- 다운로드가 시작되기 전에 차단하여 데이터 누수 방지
- 암호로 보호되지 않거나 바이러스 백신 소프트웨어가 설치되지 않았을 수 있는 관리되지 않는 장치의 네트워크에 대한 액세스를 관리하고 차단하여 랜섬웨어에 대한 노출 최소화
- 안에 저장한 데이터와 클라우드에서 다운로드한 데이터를 암호화로 보호하도록 적용하는 규칙 설정
- 관리되지 않는 장치에서 수행되는 작업을 모니터링할 수 있도록 보호되지 않는 끝점을 세부적으로 파악
- 위험한 IP 주소 및 레거시 ID 공급자의 액세스 제어

이러한 고유 기능을 사용하도록 설정하려면 프록시에서 제공하는 두 가지 수준의 제어인 액세스 제어와 세션 제어를 사용합니다. 두 가지 유형의 제어 모두 사용자 정보, 위치 정보, 장치 정보(관리되는 장치와 관리되지 않는 장치를 식별하는 데 사용)를 활용하여 각 앱에 대한 정책 결정을 내립니다.

### <a name="access-control"></a>액세스 제어
<more information about what is access control including examples> 프록시의 액세스 제어를 사용하면 클라우드 앱에 대한 강력한 액세스 정책을 만들 수 있으며 다음과 같은 기능이 제공됩니다.

Cloud App Security에서 액세스 제어를 사용하려면 기존 ID 공급자 구성에서 몇 가지를 변경하여 프록시를 배포하고 클라우드 앱을 제어할 정책을 설정합니다. 

> [!NOTE]
> -  ID 공급자의 정책을 변경할 필요가 없습니다.

#### <a name="supported-apps-and-identity-providers"></a>지원되는 앱 및 ID 공급자

프록시의 액세스 제어는 SAML 또는 WS-Federation 프로토콜을 지원하는 모든 앱 및 모든 ID 공급자를 지원하도록 설계되었습니다. Cloud App Security 팀에서는 업계를 선도하는 ID 공급자와 앱의 액세스 제어 기능을 테스트하고 있습니다. 하지만 ID 공급자와 클라우드 앱이 너무 많은 관계로 모든 ID 공급자와 앱의 조합을 테스트하지는 못합니다. 프로덕션 환경에 배포하기 전에 ID 공급자와 앱을 사용하여 Single Sign-On 프로세스를 샌드박스 또는 테스트 환경에서 테스트하는 것이 좋습니다.

### <a name="session-control"></a>세션 제어

세션 제어는 프록시에서 제공하는 추가적인 제어 계층입니다. 여러 클라우드 응용 프로그램에서 훨씬 더 세분화된 실시간 제어가 가능합니다. 특정 앱에 대한 액세스를 허용하거나 차단하는 블랭킷 정책을 설정하는 대신에, 액세스를 허용한 다음 각 사용자 세션을 모니터링하면서 액세스를 다양한 방법으로 제한할 수 있습니다. 예를 들어 특정 장치나 특정 위치에서 오는 세션의 경우 사용자의 응용 프로그램 액세스를 허용하면서 중요한 파일의 다운로드는 제한하도록 설정할 수 있습니다.

#### <a name="supported-apps-and-flows"></a>지원되는 앱 및 흐름

현재 세션 제어를 사용하면 Salesforce.com에서 파일 다운로드 및 보고서 내보내기를 차단할 수 있습니다. 사용자, 위치, 장치뿐만 아니라 다운로드할 콘텐츠를 기반으로 정책을 만들 수 있습니다.

또한, 이 버전은 브라우저로 로그인한 사용자에 대해 제한된 세션을 지원합니다. 예를 들어 네이티브 앱에서 들어오는 세션에 대한 액세스를 제한하려면, 필터 **사용자 에이전트 태그**가 **네이티브 클라이언트**와 같은 경우 등의 액세스를 차단하도록 액세스 정책을 정의해야 합니다.

Salesforce는 모든 일반 흐름에서 테스트됩니다. 그러나 Salesforce에는 다양한 타사 앱이 있으므로, 테스트되지 않았으며 세션 제어와 연동되지 않을 뿐만 아니라 일부 페이지를 작동 중지시키기까지 하는 타사 앱이 있을 수 있습니다. 이런 문제가 정말 타사 앱의 문제인지 확인하려면 타사 앱을 모두 제거한 다음, 세션 제어 기능을 사용하여 앱을 테스트합니다. 정상 작동하는 경우 문제가 있는 앱을 찾을 때까지 앱을 하나씩 추가해봅니다. 

## <a name="device-management"></a>장치 관리

Cloud App Security를 사용하면 장치 포스처를 기준으로 프록시 정책을 식별하고 만들 수 있습니다. 장치가 관리되는지의 여부를 식별하기 위해 Cloud App Security는 클라이언트 인증서 메커니즘을 활용하는데, 이 메커니즘에서는 클라이언트 인증서가 조직의 관리되는 장치에 배포됩니다. 사용자가 앱에 로그인하면, 장치에 설치된 클라이언트 인증서를 제공하라는 요청을 받게 됩니다. 클라이언트 인증서가 제공되는 경우 Cloud App Security는 장치를 관리되는 장치로 인식합니다. 
> [!NOTE]
>  사용자는 클라이언트 인증서 보내기를 거부하도록 선택할 수도 있는데, 이 경우 장치는 관리되지 않는 장치로 간주됩니다.
<좋아요. 이런 식으로 장치의 관리 여부를 알 수 있다면 이것으로 무엇을 할 수 있나요?>

### <a name="supported-browsers-and-native-apps"></a>지원되는 브라우저 및 네이티브 앱

Cloud App Security 프록시를 사용하여 수행할 수 있는 작업은... 클라이언트 인증서를 기준으로...

클라이언트 인증서는 브라우저 개발자와 네이티브 응용 프로그램 개발자가 구현 여부를 결정할 수 있는 잘 알려진 메커니즘입니다. 대다수 플랫폼의 대다수 브라우저가 이를 지원하지만 네이티브 앱의 내부 실상은 더 복잡합니다.

데스크톱 앱과 모바일 앱을 포함하는 네이티브 앱의 클라이언트 인증서 지원은 때때로 플랫폼이나 장치의 상태에 따라서도 달라질 수 있습니다. 예를 들어 Salesforce 모바일 앱인 Salesforce1에서 클라이언트 인증서는 장치에 MDM이 배포되어 있고 Salesforce1이 클라이언트 인증서를 보내도록 구성된 경우에만 작동합니다.

클라이언트 인증서는 최신 버전의 Windows, OSX, Android, iOS에서 Internet Explorer, Edge, Chrome, Safari, Firefox(각각 해당되는 브라우저 사용)로 테스트되었습니다.

> [!NOTE]
> iOS에서는 Safari 브라우저만 클라이언트 인증서와 연동됩니다.

브라우저나 네이티브 클라이언트 인증서를 지원하는 경우라 하더라도 사용자가 인증서를 제공하는 데 문제가 있을 수 있습니다. 예를 들어 사용자가 한 번이라도 클라이언트 인증서 보내기를 거부한 적이 있다면 브라우저나 네이티브 앱에서 사용자의 선택을 기억했다가 인증서에 대한 메세지를 다시 표시하지 않을 수 있습니다. 이러한 문제를 해결하려면 브라우저의 모든 열린 인스턴스를 닫은 후 새 인스턴스를 열거나, 쿠키를 모두 지우고 다시 시도하는 것이 좋습니다.

반면에 일부 브라우저와 네이티브 앱은 클라이언트 인증서를 요청하는 팝업을 표시하지 않고 대신에 인증서를 자동으로 보내는 옵션을 지원합니다.

일반적으로 정책을 적용하지 않고 모니터 모드에서만 사용자의 클라이언트 인증서 요청을 테스트하는 것이 좋습니다. 이러한 테스트는 관리되는 장치를 식별할 **로그만** 정책을 만들면 가능합니다.

## <a name="architecture"></a>아키텍처

프록시는 ID 공급자 및 앱 모두와 통합되었으며, 로그인 요청을 프록시로 리디렉션하려면 둘 다 구성해야 합니다.

또한, 관리되는 장치를 식별하기 위하여 프록시는 관리되는 장치의 클라이언트 인증서를 요청할 수 있습니다. 프록시에서 클라이언트 인증서를 받으면 장치가 관리되는 장치로 간주되어 관리되는 장치와 관리되지 않는 장치에 대한 정책이 적용됩니다.

배포 프로세스에 대한 자세한 내용은 배포 섹션을 참조하십시오.

![Cloud App Security 프록시 아키텍처](./media/proxy-architecture.png)

## <a name="user-login-flow"></a>사용자 로그인 흐름

위의 다이어그램은 ID 공급자에서 시작하는 로그인(*ID 공급자 시작 로그인*이라고도 함)을 설명합니다. 사용자가 앱에서 시작하면(*서비스 공급자 시작 로그인*이라고도 함) Cloud App Security 프록시로 이동하게 되며 여기서 다시 ID 공급자에게로 이동하게 됩니다. 로그인 프로세스의 나머지는 *ID 공급자 시작 로그인*의 경우와 비슷합니다.

*ID 공급자 시작 로그인* 흐름은 다음과 같습니다.
-   사용자가 ID 공급자에게 요청을 보내고 자격 증명을 제공합니다.

-   액세스가 허용되면 ID 공급자가 사용자를 Cloud App Security 프록시로 리디렉션합니다.

-   사용자에게 설치한 클라이언트 인증서가 있고 관리되거나 관리되지 않는 장치를 확인하는 관련 정책이 있는 경우 사용자에게 클라이언트 인증서를 제공하라는 메시지가 표시됩니다. 어느 쪽이든 액세스 정책이 평가됩니다.

-   이 시점에서 가능한 3가지 옵션이 있습니다.

    -   사용자가 앱에 액세스할 수 있음

    -   사용자가 차단되어 앱에 액세스할 수 없음

    -   사용자가 앱에 액세스할 수 있지만 모니터링되는 모드에서 가능

        -   이 경우, 사용자는 사용자와 앱 사이의 전체 세션을 모니터링하는 Cloud App Security 프록시로 다시 리디렉션됩니다.

        -   모니터링하는 동안 프록시는 세션 정책을 평가하고 그에 따라 차단 작업을 수행할 수 있습니다.

## <a name="how-access-control-works"></a>액세스 제어 작동 방법

프록시 배포의 일환으로, 제어할 ID 공급자와 앱 모두의 구성을 변경해야 합니다. 여기에는 URL 변경 내용이 포함됩니다. 그래야 ID 공급자와 앱이 로그인 요청을 프록시로 리디렉션할 수 있기 때문입니다. 추가로 필요에 따라 인증서가 교체되기도 합니다.

이러한 단계가 완료된 후에는 모든 로그인 이벤트가 프록시를 통하게 되며 프록시는 이들의 앱에 대한 액세스를 허용할지 거부할지 아니면 모니터링되는 모드로 허용할지를 결정할 수 있습니다. 이 단계에서 프록시는 장치의 클라이언트 인증서를 요청할 수 있으며, 장치 상태를 사용하여 정책 결정을 내릴 수 있습니다.

## <a name="how-session-control-works"></a>세션 제어 작동 방식

프록시의 세션 제어는 액세스 제어를 토대로 구축되었습니다. 앱에 대한 액세스를 제어하고 나면 액세스 정책에 따른 세션의 모니터링 여부를, 세션을 프록시의 세션 제어에 리디렉션함으로써 결정할 수 있습니다. 이때부터는 사용자 요청 및 응답이 앱에 바로 가는 것이 아니라 프록시를 통해서 가게 됩니다.

프록시는 사용자를 세션 내에 유지하기 위하여 모든 관련 URL, Java 스크립트, 앱 내의 쿠키를 프록시에서 복제된 페이지로 바꿉니다. 예: 앱이 *myapp.com*으로 끝나는 링크를 가진 페이지를 반환하는 경우 프록시는 이를 *myapp.com.cas.ms* 등으로 끝나는 페이지로 바꿉니다.

세션이 프록시를 통해 이동한 후에는 프록시가 트래픽을 검사하고 Cloud App 프록시에서 식별된 이벤트를 표시하고 해당 세션에 정책을 적용할 수 있습니다.

## <a name="how-identifying-managed-devices-works"></a>관리되는 장치 식별 작동 방법

프록시는 관리되는 장치를 식별하기 위하여 클라이언트 인증서의 메커니즘을 사용합니다. 그 메커니즘은 다음과 같습니다.

-   사용자의 장치에 클라이언트 인증서가 설치되어 있고 관리되거나 관리되지 않는 장치를 확인하는 관련 정책이 있는 경우입니다.

    -   사용자가 로그인 단계에서 프록시 페이지에 도달하면 프록시는 사용자 장치의 클라이언트 인증서를 요청합니다.

    -   사용자 장치가 클라이언트 인증서를 제공하라는 메시지를 표시하며 승인되면 클라이언트 인증서가 프록시로 보내집니다.

    -   그러면 프록시는 관리자가 제공한 루트 인증서에 대해 클라이언트 인증서를 인증합니다.

    -   장치에서 제공한 클라이언트 인증서가 루트 인증서에 대해 인증되면 장치가 관리되는 장치로 간주됩니다.

-   이전 단계를 하나라도 완료하지 않으면 장치는 관리되지 않는 장치로 간주됩니다.



## <a name="see-also"></a>참고 항목  
[프록시 배포](proxy-deployment.md)   
[기술 지원을 받으려면 Cloud App Security 보조 지원 페이지를 방문하세요.](http://support.microsoft.com/oas/default.aspx?prid=16031)   
[프리미어 고객은 프리미어 포털에서 직접 Cloud App Security를 선택할 수도 있습니다.](https://premier.microsoft.com/)  
  