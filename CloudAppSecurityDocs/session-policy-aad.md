---
title: 세션 정책을 만들어서 사용자 세션에 대한 심층적인 가시성을 확보하고 다운로드를 차단 | Microsoft Docs
description: 이 문서에서는 사용자의 세션 활동에 대한 심층적인 가시성을 확보하고 역방향 프록시 기능을 사용하여 다운로드를 차단하기 위해 Cloud App Security 조건부 액세스 앱 제어 세션 정책을 설정하는 절차를 설명합니다.
keywords: ''
author: rkarlin
ms.author: rkarlin
manager: mbaldwin
ms.date: 12/9/2018
ms.topic: conceptual
ms.prod: ''
ms.service: cloud-app-security
ms.technology: ''
ms.assetid: 745df28a-654c-4abf-9c90-203841169f90
ms.reviewer: reutam
ms.suite: ems
ms.openlocfilehash: 0019609036b222da25eede8b1ca3a34d0617ebe4
ms.sourcegitcommit: c497253a7ab63973bb806607e5f15dece91640be
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/10/2018
ms.locfileid: "53124539"
---
# <a name="session-policies"></a>세션 정책 

*적용 대상: Microsoft Cloud App Security*

>[!div class="step-by-step"]
[« 이전: 조건부 액세스 앱 제어 배포](proxy-deployment-aad.md)<br>
[다음: 액세스 정책을 만드는 방법 »](access-policy-aad.md)


Microsoft Cloud App Security 세션 정책을 사용하면 실시간 세션 수준 모니터링에서 클라우드 앱에 대한 세부적인 가시성을 제공하고 사용자 세션에 설정한 정책에 따라 다른 작업을 수행할 수 있습니다. 세션 제어를 통해 [액세스를 완전히 허용하거나 차단](access-policy-aad.md)하는 대신, 조건부 액세스 액 제어의 역방향 프록시 기능을 사용하여 세션을 모니터링하면서 액세스를 허용하거나 특정 세션 활동을 제한할 수 있습니다. 

예를 들어 관리되지 않는 디바이스 또는 특정 위치에서 오는 세션에 대해 사용자가 앱에 액세스할 수 있도록 허용하고 중요한 파일의 다운로드도 제한하도록 결정하거나, 다운로드 시 특정 문서를 보호하도록 요구할 수 있습니다. 세션 정책을 통해 이러한 사용자 세션 제어를 설정하고 액세스를 허용하며 다음을 수행할 수 있습니다.

- [모든 활동 모니터링](#monitor-session)
- [모든 다운로드 차단](#block-download)
- [특정 활동 차단](#block-activities)
- [다운로드 시 파일 보호](#protect-download)
 
## <a name="prerequisites-to-using-session-policies"></a>세션 정책을 사용하기 위한 필수 구성 요소

- Azure AD Premium P1 라이선스
- 관련 앱은 [조건부 액세스 앱 제어를 사용하여 배포됩니다](proxy-deployment-aad.md).
- [Azure AD 조건부 액세스 정책](https://docs.microsoft.com/azure/active-directory/active-directory-conditional-access-azure-portal)이 아래에 설명된 대로 사용자를 Microsoft Cloud App Security로 리디렉션하는 위치에 있어야 합니다.

> [!NOTE]
> 세션 정책은 Azure AD 이외의 ID 공급자로 구성된 앱도 지원합니다. 이 시나리오에 대한 자세한 내용은 mcaspreview@microsoft.com으로 이메일을 보내주세요.

## <a name="create-an-azure-ad-conditional-access-policy"></a>Azure AD 조건부 액세스 정책 만들기

Azure Active Directory 조건부 액세스 정책과 Cloud App Security 세션 정책이 동시에 작동하여 각 사용자 세션을 검사하고 각 앱에 대한 정책을 결정합니다. Azure AD에서 조건부 액세스 정책을 설정하려면 다음 절차를 수행합니다.

1. 조건부 액세스 앱 제어를 통해 제어하려는 사용자 또는 사용자 그룹 및 앱에 대한 할당을 사용하여 [Azure AD 조건부 액세스 정책](https://docs.microsoft.com/azure/active-directory/active-directory-conditional-access-azure-portal)을 구성합니다. 

   > [!NOTE]
   > [조건부 액세스 앱 제어를 사용하여 배포](proxy-deployment-aad.md)된 앱만 이 정책에 따라 영향을 받습니다.

2. **세션** 페이지에서 **조건부 액세스 앱 제어 적용 제한 사용**을 선택하여 사용자를 Microsoft Cloud App Security로 라우팅합니다.

## <a name="create-a-cloud-app-security-session-policy"></a>Cloud App Security 세션 정책 만들기 

새 세션 정책을 만들려면 다음 절차를 따르세요.

1. 포털에서 **제어**, **정책**을 차례로 선택합니다.
2. **정책** 페이지에서 **정책 만들기**를 클릭하고 **세션 정책**을 선택합니다.  

3. **세션 정책** 창에서 *마케팅 사용자용 Box에서 중요한 문서 다운로드 차단*과 같은 정책 이름을 지정합니다.

4. **세션 제어 유형** 필드에서 

   1. 사용자별 활동만 모니터링하려면 **모니터만**을 선택합니다. 이 선택 영역에는 모든 로그인, 경험적 다운로드 및 활동 유형이 다운로드되는 선택한 앱에 대한 모니터만 정책이 생성됩니다.

   2. 사용자 작업을 모니터링하려면 **파일 다운로드 제어(DLP 포함)** 를 선택합니다. 사용자에 대한 다운로드 차단 또는 보호와 같은 추가 작업을 수행할 수 있습니다.
   
   3. **활동 유형** 필터를 사용하여 선택할 수 있는 특정 활동을 차단하려면 **활동 차단**을 선택합니다. 선택한 앱의 모든 활동이 모니터링되고 활동 로그에 보고됩니다. **블록** 작업을 선택하면 선택한 특정 활동이 차단됩니다. **테스트** 작업을 선택하고 경고를 켜면 선택한 특정 활동이 경고를 발생시킵니다.

5. **다음 항목 모두와 일치하는 활동** 섹션의 **활동 원본** 아래에서 정책에 적용할 추가 활동 필터를 선택합니다. 이러한 필터에는 다음 옵션이 포함될 수 있습니다. 

   - **장치 태그**: 관리되지 않는 장치를 식별하려면 이 필터를 사용합니다.

   - **위치**: 알 수 없는(이에 따라 위험한) 위치를 식별하려면 이 필터를 사용합니다. 

   - **IP 주소**: IP 주소별로 필터링하거나 이전에 할당된 IP 주소 태그를 사용하려면 이 필터를 사용합니다. 

   - **사용자 에이전트 태그**: 추론 방식으로 모바일 및 데스크톱 앱을 식별하려면 이 필터를 사용합니다. 이 필터는 **네이티브 클라이언트**와 같거나 같지 않도록 설정할 수 있습니다. 이 필터는 각 클라우드 앱에 대한 모바일 및 데스크톱 앱에 대해 테스트해야 합니다.
       
 
     >[!NOTE]
     >세션 정책은 모바일 및 데스크톱 앱을 지원하지 않습니다. 액세스 정책을 만들어 모바일 앱 및 데스크톱 앱도 차단되거나 허용될 수 있습니다.

6. **파일 다운로드 제어(DLP 포함)** 옵션을 선택한 경우, 다음을 수행합니다.

   1. **다음 항목 모두와 일치하는 파일**의 **활동 원본** 아래에서 정책에 적용할 추가 파일 필터를 선택합니다. 이러한 필터에는 다음 옵션이 포함될 수 있습니다.

      - **분류 레이블** - 조직에서 Azure Information Protection을 사용하고 데이터가 분류 레이블로 보호되는 경우 이 필터를 사용합니다. 파일에 적용한 분류 레이블에 따라 파일을 필터링할 수 있습니다. Azure Information Protection과의 통합에 대한 자세한 내용은 [Azure Information Protection 통합](azip-integration.md)을 참조하세요.

      - **파일 이름** - 특정 파일에 정책을 적용하려면 이 필터를 사용합니다.

      - **파일 형식** - 정책을 특정 파일 형식(예: 모든 .xls 파일에 대한 다운로드 차단)에 적용하려면 이 필터를 사용합니다.
       
   2. **콘텐츠 검사** 섹션에서 DLP 엔진을 통해 문서 및 파일 콘텐츠를 검사하도록 설정할지 여부를 지정합니다.
 
   3. **작업** 아래에서 다음 항목 중 하나를 선택합니다. 

      - **테스트(모든 활동 모니터링)**: 설정한 정책 필터에 따라 다운로드를 명시적으로 허용하려면 이 작업을 설정합니다.

      - **차단(파일 다운로드 차단 및 모든 활동 모니터링)**: 설정한 정책 필터에 따라 다운로드를 명시적으로 차단하려면 이 작업을 설정합니다. 자세한 내용은 [다운로드 차단 작동 방식](#block-download)을 참조하세요.

      - **보호(다운로드에 분류 레이블 적용 및 모든 활동 모니터링)**: 이 옵션은 **세션 정책**에서 **파일 다운로드 제어(DLP 포함)** 를 선택한 경우에만 사용할 수 있습니다. 조직에서 Azure Information Protection을 사용하는 경우 Azure Information Protection의 분류 레이블 설정을 파일에 적용하도록 **작업**을 설정할 수 있습니다. 자세한 내용은 [다운로드 보호 작동 방식](#protect-download)을 참조하세요.

7. **정책의 심각도로 각 일치 이벤트에 대한 경고 만들기** 및 경고 제한을 설정할 수 있습니다. 경고를 이메일, 문자 메시지 또는 둘 다로 보낼지를 선택합니다.


## 모든 활동 모니터링 <a name="monitor-session"></a>

세션 정책을 만들면 정책과 일치하는 각 사용자 세션이 앱이 아닌 세션 제어로 직접 리디렉션됩니다. 세션이 모니터링되고 있음을 알려주는 모니터링 알림이 사용자에게 표시됩니다.

사용자에게 모니터링하고 있음을 알리지 않으려면 알림 메시지를 해제할 수 있습니다.

1. 설정 코그 아래에서 **일반 설정**을 선택합니다. 

2. 그런 다음, **조건부 액세스 앱 제어**에서 **사용자 모니터링**을 선택하고 **사용자 알림** 확인란을 선택 취소합니다.

세션 내에서 사용자를 유지하기 위해 조건부 액세스 앱 제어는 앱 세션 내에서 관련된 모든 URL, Java 스크립트 및 쿠키를 Microsoft Cloud App Security URL로 바꿉니다. 예를 들어 앱에서 도메인이 myapp.com으로 끝나는 링크가 포함된 페이지를 반환하는 경우 조건부 액세스 앱 제어는 연결을 myapp.com.us.cas.ms와 같이 끝나는 도메인으로 바꿉니다. 이렇게 하면 전체 세션이 Microsoft Cloud App Security에서 모니터링됩니다.

조건부 액세스 앱 제어는 라우팅된 모든 사용자 세션의 트래픽 로그를 기록합니다. 트래픽 로그에는 시간, IP, 사용자 에이전트, 방문한 URL 및 업로드 및 다운로드한 바이트 수가 포함됩니다. 이러한 로그가 분석되고 **Cloud App Security 조건부 액세스 앱 제어**라는 연속 보고서가 Cloud Discovery 대시보드의 Cloud Discovery 보고서 목록에 추가됩니다.

이러한 로그를 내보내려면 다음을 수행합니다.

1. 설정 코그로 이동하고 **Conditional Access App Control**(조건부 액세스 앱 제어)을 클릭합니다.
2. 테이블의 오른쪽에서 내보내기 단추를 클릭합니다.

   ![내보내기 단추](./media/export-button.png)
3. 보고서 범위를 선택하고 **내보내기**를 클릭합니다. 이 프로세스는 다소 시간이 걸릴 수 있습니다.

내보낸 로그를 다운로드하려면 다음을 수행합니다.

1. 보고서가 준비되면 **설정**으로 이동한 다음, **내보낸 보고서**로 이동합니다.
2. 테이블의 **조건부 액세스 앱 제어 트래픽 로그** 목록에서 관련 보고서를 선택하고 다운로드를 클릭합니다.

     ![다운로드 단추](./media/download-button.png)


## 모든 다운로드 차단 <a name="block-download"></a>

**블록**을 Cloud App Security 세션 정책에서 수행하려는 **작업**으로 설정하면 조건부 액세스 앱 제어에서 사용자가 정책의 파일 필터별로 파일을 다운로드하지 못하도록 합니다. 다운로드 이벤트는 사용자가 다운로드를 시작할 때 각 앱에 대해 Microsoft Cloud App Security에서 인식됩니다. 조건부 액세스 앱 제어는 이벤트가 실행되는 것을 방지하기 위해 실시간으로 개입합니다. 사용자가 다운로드를 시작한 신호가 수신되면 조건부 액세스 앱 제어는 **제한된 다운로드** 메시지를 사용자에게 보내고, 다운로드한 파일을 텍스트 파일로 바꿉니다. 사용자에게 보내는 텍스트 파일의 메시지는 세션 정책에서 구성하고 사용자 지정할 수 있습니다.  

## 특정 활동 차단 <a name="block-activities"></a>

**활동 차단**을 **활동 유형**으로 설정하는 경우 특정 앱에서 차단할 특정 활동을 선택할 수 있습니다. 선택한 앱의 모든 활동이 모니터링되고 활동 로그에 보고됩니다. **블록** 작업을 선택하면 선택한 특정 활동이 차단됩니다. **테스트** 작업을 선택하고 경고를 켜면 선택한 특정 활동이 경고를 발생시킵니다.

**특정 활동을 차단**하고 특정 그룹에 적용하여 조직에 포괄적인 읽기 전용 모드를 만듭니다. 

## 다운로드 시 파일 보호 <a name="protect-download"></a>

**활동 유형** 필터를 사용하여 찾을 수 있는 특정 활동을 차단하려면 **활동 차단**을 선택합니다. 선택한 앱의 모든 활동이 모니터링되고 활동 로그에 보고됩니다. **블록** 작업을 선택하면 선택한 특정 활동이 차단됩니다. **테스트** 작업을 선택하고 경고를 켜면 선택한 특정 활동이 경고를 발생시킵니다.

**보호**를 Cloud App Security 세션 정책에서 수행할 **작업**으로 설정하면 조건부 액세스 앱 제어는 정책의 파일 필터별로 파일의 레이블 지정과 후속 보호를 적용합니다. 레이블은 Azure Information Protection 콘솔에서 구성되며, 클라우드 앱 보안 정책에서 옵션으로 표시되도록 레이블 내에서 **보호**를 선택해야 합니다. 레이블을 선택하고 Cloud App Security 정책 기준을 충족하는 파일을 다운로드하는 경우 다운로드 시 이 레이블과 해당 보호(권한 포함)가 파일에 적용됩니다. 이제 다운로드한 파일이 보호되는 동안 원본 파일은 있는 그대로 클라우드 앱에 남아 있습니다. 파일에 액세스하려는 사용자는 적용된 보호에 의해 결정된 권한 요구 사항을 충족해야 합니다.  
 
>[!div class="step-by-step"]
[« 이전: 조건부 액세스 앱 제어 배포](proxy-deployment-aad.md)<br>
[다음: 액세스 정책을 만드는 방법 »](access-policy-aad.md)

## <a name="next-steps"></a>다음 단계
 
[Azure AD 조건부 액세스 앱 제어 기능을 사용하여 관리되지 않는 장치에서 다운로드 차단](use-case-proxy-block-session-aad.md)   

[프리미어 고객은 프리미어 포털에서 직접 새 지원 요청을 만들 수도 있습니다.](https://premier.microsoft.com/)  
  
  